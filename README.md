# PDF矢量图提取工具

一个专门用于从PDF文件中提取艺术字矢量图并进行智能拼接的桌面应用程序。

## 主要功能

- 📁 **批量处理**: 支持选择包含多个PDF文件的目录进行批量处理
- 🎯 **智能识别**: 自动检测PDF中的矢量图内容并确定中心点
- ✂️ **智能裁剪**: 根据内容比例和中心点进行智能裁剪，确保图像完整性
- 📐 **尺寸统一**: 将不同大小的图像裁剪为统一尺寸，便于排列
- 🔧 **参数可调**: 支持自定义裁剪框大小、图片间距等参数
- 💾 **多格式输出**: 支持PNG、SVG、PDF格式输出
- 🖥️ **中文界面**: 完全中文化的用户界面
- 📦 **免安装**: Windows下单个exe文件，无需安装任何环境

## 系统要求

- **Windows**: Windows 7 或更高版本 (主要支持平台)
- **Linux**: 任何现代Linux发行版 (测试支持)
- **macOS**: macOS 10.12 或更高版本 (测试支持)

## 安装与使用

### Windows用户 (推荐)

1. 下载 `pdf-extractor-windows-amd64.exe`
2. 双击运行，无需安装
3. 按照界面提示操作：
   - 选择包含PDF文件的目录
   - 设置输出文件路径
   - 调整参数（可选）
   - 点击"开始处理"

### 开发者构建

```bash
# 克隆仓库
git clone <repository-url>
cd pdf-vector-extractor

# 安装Go依赖
go mod tidy

# 构建Windows版本
make windows

# 或使用构建脚本
./build.sh
```

## 使用说明

### 基本操作流程

1. **选择输入目录**
   - 点击"选择目录"按钮
   - 选择包含PDF文件的文件夹
   - 支持001xxx、002xxx等序号命名的PDF文件

2. **设置输出路径**
   - 点击"选择输出"按钮
   - 指定合并后文件的保存位置和名称

3. **调整参数**
   - **裁剪框大小**: 设置每个图像的统一尺寸（像素）
   - **图片间距**: 设置拼接时图像之间的间距
   - **输出格式**: 选择PNG、SVG或PDF格式

4. **开始处理**
   - 点击"开始处理"按钮
   - 等待处理完成
   - 查看生成的合并文件

### 参数说明

- **裁剪框大小** (默认: 200像素)
  - 所有提取的图像将被裁剪为此尺寸的正方形
  - 建议根据原始PDF中艺术字的大小调整

- **图片间距** (默认: 10像素)
  - 拼接时图像之间的垂直间距
  - 设为0可以紧密拼接

- **输出格式**
  - **PNG**: 位图格式，通用性好，文件较大
  - **SVG**: 矢量格式，保持缩放质量，文件较小
  - **PDF**: PDF文档格式，适合打印

## 技术特性

### 智能图像处理

- **边缘检测**: 使用Sobel算子进行边缘检测
- **内容识别**: 自动识别非白色/透明内容区域
- **中心点计算**: 基于内容边界计算精确中心点
- **比例保持**: 根据内容宽高比智能调整裁剪区域

### 高级功能

- **批量处理**: 自动扫描目录中的所有PDF文件
- **文件排序**: 按文件名自动排序，确保正确的拼接顺序
- **错误处理**: 完善的错误处理和用户提示
- **进度反馈**: 处理过程中的实时状态显示

## 文件结构

```
pdf-vector-extractor/
├── main.go              # 主程序和GUI界面
├── pdf_processor.go     # 增强的PDF处理模块
├── svg_writer.go        # SVG输出模块
├── pdf_writer.go        # PDF输出模块
├── go.mod              # Go模块定义
├── build.sh            # 构建脚本
├── Makefile            # 构建配置
└── README.md           # 说明文档
```

## 构建说明

### 环境要求

- Go 1.21 或更高版本
- CGO支持（用于Fyne GUI）
- Windows: MinGW-w64 (用于交叉编译)

### 构建命令

```bash
# 构建Windows版本（主要目标）
make windows

# 构建所有平台
make all-platforms

# 清理构建文件
make clean

# 运行测试
make test
```

### 静态编译说明

Windows版本使用完全静态编译，包含所有依赖库，确保在任何Windows系统上都能直接运行，无需额外安装任何运行时环境。

## 常见问题

### Q: 程序无法识别PDF中的内容怎么办？
A: 请确保PDF文件包含可渲染的内容。某些加密或特殊格式的PDF可能无法正确处理。

### Q: 输出的图像质量不理想怎么办？
A: 可以尝试调整"裁剪框大小"参数，增大数值可以获得更高分辨率的输出。

### Q: 支持其他输出格式吗？
A: 目前支持PNG、SVG、PDF三种格式。如需其他格式，请提交功能请求。

### Q: 可以处理非艺术字内容吗？
A: 工具设计用于艺术字提取，但理论上可以处理任何PDF中的可视内容。

## 许可证

本项目采用 MIT 许可证。详见 LICENSE 文件。

## 贡献

欢迎提交问题报告和功能请求。如需贡献代码，请先提交 Issue 讨论。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issue
- 发送邮件至项目维护者